<div class="questions">

  <!-- Search & Reset Row -->
  <div class="toolbar p-mb-4">
    <div class="search-box">
      <span class="p-input-icon-left">
        <i class="pi pi-search"></i>
        <input pInputText type="text" formControlName="question" (ngModelChange)="OnChange()"
          placeholder="{{ 'searchQuestion_question' | translate }}" />
      </span>
    </div>
    <button pButton type="button" icon="pi pi-refresh" class="p-button-rounded" (click)="resetform()"></button>
  </div>

  <!-- Cards Grid -->
  <div *ngIf="!loading; else loadingTpl" class="cards-grid">
    <p-card *ngFor="let row of data" class="question-card" [style]="{ width: '100%' }">
      <ng-template pTemplate="title">
        <div class="card-header">
          <i class="pi pi-question-circle question-icon"></i>
          <div class="question-text">
            {{ row.questionTranslations![layoutService.config.lang]?.questionText }}
          </div>
          <div class="one">
            <div [matMenuTriggerFor]="menu" class="card__actions">
              <span class="material-symbols-outlined card__actions__details">more_vert</span>
            </div>
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="openAddQuestion(row)">
                <span class="material-symbols-outlined">Edit</span>
                {{ 'Edit_Option' | translate }}
              </button>
              <button mat-menu-item>
                <span class="material-symbols-outlined">delete</span>
                {{ 'Delete_Option' | translate }}
              </button>
            </mat-menu>

          </div>
        </div>
      </ng-template>

      <div class="card-content">
        <div class="options-label">{{ 'questionOptions_questions' | translate }}:</div>
        <div class="answers_container">
          <p-tag *ngFor="let o of row.options" [value]="o.optionTranslation![layoutService.config.lang]?.name"
            class="answer-tag"></p-tag>
        </div>
      </div>
    </p-card>
  </div>

  <!-- Paginator & Add Button -->
  <div class="footer-bar">
    <div class="total-count">
      {{ 'totalQuestion_question'|translate }}: {{ totalRecords }}
    </div>
    <p-paginator [rows]="pageSize" [totalRecords]="totalRecords" [rowsPerPageOptions]="[4,12,20,30]" [first]="first"
      (onPageChange)="paginate($event)"></p-paginator>

    <button pButton icon="pi pi-plus" class="add-question-btn p-button-rounded p-button-lg"
      (click)="openAddQuestion()"></button>
  </div>

</div>

<ng-template #loadingTpl>
  <div class="loading-grid">
    <p-skeleton *ngFor="let i of [1,2,3,4]" height="10rem"></p-skeleton>
  </div>
</ng-template>